



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="This hands-on workshop is where you will learn about a number of AWS services that will enable you to securely administer your systems in AWS as we walk through real-world threat scenarios. Learn about the secure administration capabilities of AWS Session Manager, AWS Identity and Access Management and Amazon EC2 Instance Connect.">
      
      
        <link rel="canonical" href="https://infrastructure-identity.awssecworkshops.com/01-environment-setup/">
      
      
        <meta name="author" content="aws-security-workshops@amazon.com">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/aws-favicon.ico">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-4.6.3">
    
    
      
        <title>Module 1: Environment setup - Infrastructure Identity in AWS</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.adb8469c.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../stylesheets/custom.css">
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#module-1-setup-instructions" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://infrastructure-identity.awssecworkshops.com/" title="Infrastructure Identity in AWS" aria-label="Infrastructure Identity in AWS" class="md-header-nav__button md-logo">
          
            <img alt="logo" src="../assets/images/aws_smile_logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Infrastructure Identity in AWS
            </span>
            <span class="md-header-nav__topic">
              
                Module 1: Environment setup
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/aws-samples/aws-secure-access-infrastructure-identity-workshop/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    aws-samples/aws-secure-access-infrastructure-identity-workshop
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://infrastructure-identity.awssecworkshops.com/" title="Infrastructure Identity in AWS" class="md-nav__button md-logo">
      
        <img alt="logo" src="../assets/images/aws_smile_logo.png" width="48" height="48">
      
    </a>
    Infrastructure Identity in AWS
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/aws-samples/aws-secure-access-infrastructure-identity-workshop/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    aws-samples/aws-secure-access-infrastructure-identity-workshop
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Module 1: Environment setup
      </label>
    
    <a href="./" title="Module 1: Environment setup" class="md-nav__link md-nav__link--active">
      Module 1: Environment setup
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture-overview" class="md-nav__link">
    Architecture Overview
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../02-using-AWS-Systems-Manager-Session-Manager/" title="Module 2: Session Manager" class="md-nav__link">
      Module 2: Session Manager
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../03-using-EC2-Instance-Connect/" title="Module 3: EC2 Instance Connect" class="md-nav__link">
      Module 3: EC2 Instance Connect
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../04-cleanup/" title="Module 4: Cleanup" class="md-nav__link">
      Module 4: Cleanup
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../contribute/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture-overview" class="md-nav__link">
    Architecture Overview
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/aws-samples/aws-secure-access-infrastructure-identity-workshop/edit/master/docs/01-environment-setup.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="module-1-setup-instructions">Module 1: Setup Instructions</h1>
<p>In the first module you'll be running a CloudFormation template which will build your Cloud9 environment and then you will manually configure the rest. AWS Cloud9 is a cloud-based integrated development environment (IDE) that lets you write, run, and debug your code with just a browser. It includes a code editor, debugger, and terminal. Cloud9 comes pre-packaged with essential tools for popular programming languages and the AWS Command Line Interface (CLI) pre-installed so you don’t need to install files or configure your laptop for this workshop.</p>
<p>To setup your environment please expand one of the following drop-downs (depending on if you are doing this workshop at an <strong>AWS event</strong> or <strong>individually</strong>) and follow the instructions:</p>
<details class="info"><summary>Click here if you are <em>using your own AWS account</em>. You will be using your computer to run the commands.</summary><ol>
<li>Log in to your account however you would normally.<blockquote>
<p>Please note for this lab you will need the following permissions:</p>
<ul>
<li>AmazonEC2FullAccess</li>
<li>CloudWatchFullAccess</li>
<li>AWSCloud9Administrator</li>
<li>AWSCloudTrailReadOnlyAccess</li>
<li>iam:*</li>
<li>s3:*</li>
<li>ssm:*</li>
<li>cloudformation:*</li>
</ul>
</blockquote>
</li>
</ol>
<table>
<thead>
<tr>
<th>Region</th>
<th>Deploy</th>
</tr>
</thead>
<tbody>
<tr>
<td>US East 1 (Virginia)</td>
<td><a href="https://console.aws.amazon.com/cloudformation/home?region=us-east-1#/stacks/new?stackName=Infrastructure-Identity&templateURL=https://sa-security-specialist-workshops-us-west-2.s3-us-west-2.amazonaws.com/identity-workshop/idm-infrastructure/01-environment-setup.yaml" target="_blank"><img alt="Deploy in us-east-2" src="../images/deploy-to-aws.png" /></a></td>
</tr>
</tbody>
</table>
<ol>
<li>Click the <strong>Deploy to AWS</strong> button above.  This will automatically take you to the console to run the template.  </li>
<li>Click <strong>Next</strong> under the <strong>Create stack</strong> section.</li>
<li>Click <strong>Next</strong> under the <strong>Specify stack details</strong> section (the stack name will already be filled - leave the other options in Parameters at there default settings)</li>
<li>Click <strong>Next</strong> under the <strong>Advanced options</strong> section.</li>
<li>Finally, acknowledge that the template will create IAM resources with custom names under <strong>Capabilities</strong> and click <strong>Create stack</strong>.</li>
<li>This will bring you back to the CloudFormation console. You can refresh the stack set to see the latest status. Before moving on, make sure the stack finally shows <strong>CREATE_COMPLETE</strong>.</li>
<li>Navigate to the <a href="https://us-east-1.console.aws.amazon.com/cloud9/home" target="_blank">AWS Cloud9</a> console.</li>
<li>Now you need to update the credentials in your Cloud9IDE to match the credentials you use on your laptop. Type <code>aws configure --profile default</code> hit enter. Hit enter until you get to the choice <strong>Default region name</strong> and type in <code>us-east-1</code>. Hit enter and then enter again to leave this menu.</li>
<li>Copy your ~/.aws/credentials file from your laptop to your Cloud9IDE session or create new credentials for this lab with the appropriate permissions as referenced in the note under step 1. You should end up with something that looks like this:<br>
[default]</br>
AWS_ACCESS_KEY_ID=ASIA<strong><em>_</em></strong>_</br>
AWS_SECRET_ACCESS_KEY=iZoD<strong><em>_</em></strong><strong><em>_</em></strong><strong><em>_</em></strong>__</br></li>
<li>Now you can run commands from within the Cloud9 IDE using your credentials. If you open a new tab you will need to paste in the credentials again.</li>
<li>Move on to <strong>Module 2</strong>.</li>
</ol>
</details>
<details class="info"><summary>Click here if you're at an <em>AWS event</em> where the <em>Event Engine</em> is being used. You will be using Cloud9 to run the commands.</summary><p><p style="font-size:20px;">
  <strong>Step 1</strong> : Retrieve temporary credentials from Event Engine
</p></p>
<ol>
<li>Navigate to the <a href="https://dashboard.eventengine.run" target="_blank">Event Engine dashboard</a></li>
<li>Enter your <strong>team hash</strong> code.</li>
<li>Click <strong>AWS Console</strong></li>
<li>Copy the <strong>export</strong> commands under the <strong>Credentials</strong> section for the temporary credentials (you will need these in the next step.)</li>
</ol>
<p><p style="font-size:20px;">
  <strong>Step 2</strong> : Connect to the AWS Console via Event Engine and browse to the AWS Cloud9 IDE
</p></p>
<ol>
<li>Click <strong>Open Console</strong> from the Event Engine window</li>
<li>Navigate to the <a href="https://us-east-1.console.aws.amazon.com/cloud9/home" target="_blank">AWS Cloud9</a> console.</li>
<li>On the left side of the Cloud9 Console is a menu, Click on <strong>Account environments</strong> and select <strong>Open IDE</strong> on the environment that has been deployed for you.</li>
<li>Click the <strong>gear image</strong> icon in the upper right hand corner to open the Cloud9 Preferences. Scroll down in the settings, click on the <strong>AWS SETTINGS</strong> section, go to <strong>Credentials</strong> and click the button next to <strong>AWS managed temporary credentials</strong> to disable this.</li>
<li>Now go to a Cloud9 tab and click the <strong>plus sign</strong> to open a new terminal window (tab title will start with the words <strong>bash</strong>).</li>
<li>Type <code>aws configure --profile default</code> hit enter. Hit enter until you get to the choice <strong>Default region name</strong> and type in <code>us-east-1</code>. Hit enter and then enter again to leave this menu.</li>
<li>Then create a file in the <code>~/.aws</code> directory named <code>credentials</code> and paste in the credentials you copied from the Event Engine. You will need to remove the word <strong>export</strong> from the start of each line. Add <code>[default]</code> before all these rows. You should end up with something that looks like this:<br>
[default]</br>
AWS_ACCESS_KEY_ID=ASIA<strong><em>_</em></strong>_</br>
AWS_SECRET_ACCESS_KEY=iZoD<strong><em>_</em></strong><strong><em>_</em></strong><strong><em>_</em></strong>__</br>
AWS_SESSION_TOKEN=FQoG<strong><em>_</em></strong><strong><em>_</em></strong><strong><em>_</em></strong><strong><em>_</em></strong><strong><em>_</em></strong><strong><em>_</em></strong>___</br></li>
<li>Now you can run commands from within the Cloud9 IDE using the temporary credentials from Event Engine. If you open a new tab you will need to paste in the credentials again.</li>
<li>Move on to <strong>Module 2</strong>.</li>
</ol>
</details>
<h3 id="_1"></h3>
<h2 id="architecture-overview">Architecture Overview</h2>
<p>Your environment is now configured and ready for next steps.  Below is a diagram to depict the initial environment.</p>
<p><img alt="VPC" src="../images/01-IdentityInfrastructure-Env-Setup.png" /></p>
<p>After you have successfully setup your environment, you can proceed to the next module.</p>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href=".." title="Overview" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Overview
              </span>
            </div>
          </a>
        
        
          <a href="../02-using-AWS-Systems-Manager-Session-Manager/" title="Module 2: Session Manager" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Module 2: Session Manager
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            <a href="https://aws.amazon.com/privacy/" target="_blank">Privacy</a> | <a href="https://aws.amazon.com/terms/" target="_blank">Site terms</a> | &copy; 2020, Amazon Web Services, Inc. or its affiliates. All rights reserved.
          </div>
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://awssecworkshops.com" target="_blank" rel="noopener" title="" class="md-footer-social__link fa fa-"></a>
    
      <a href="https://aws.amazon.com/security/" target="_blank" rel="noopener" title="" class="md-footer-social__link fa fa-"></a>
    
      <a href="https://twitter.com/awssecurityinfo?lang=en" target="_blank" rel="noopener" title="" class="md-footer-social__link fa fa-"></a>
    
      <a href="https://aws.amazon.com/blogs/security/" target="_blank" rel="noopener" title="" class="md-footer-social__link fa fa-"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.1.2",url:{base:".."}})</script>
      
    
  </body>
</html>