



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="This hands-on workshop is where you will learn about a number of AWS services that will enable you to securely administer your systems in AWS as we walk through real-world threat scenarios. Learn about the secure administration capabilities of AWS Session Manager, AWS Identity and Access Management and Amazon EC2 Instance Connect.">
      
      
        <link rel="canonical" href="https://idm-infrastructure.awssecworkshops.com/02-using-AWS-Systems-Manager-Session-Manager/">
      
      
        <meta name="author" content="aws-security-workshops@amazon.com">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/aws-favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.2.0">
    
    
      
        <title>Module 2: Session Manager - Infrastructure Identity in AWS</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.750b69bd.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../stylesheets/custom.css">
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#module-2-session-manager" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <!--
  Copyright (c) 2016-2018 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Application header -->
<header class="md-header" data-md-component="header">

    <!-- Top-level navigation -->
    <nav class="md-header-nav md-grid">
      <div class="md-flex">

        <!-- Link to home -->
        <div class="md-flex__cell md-flex__cell--shrink">
          <a href="https://aws.amazon.com/"
              title="Amazon Web Services"
              class="md-header-nav__button md-logo">
            
              <img src="../assets/images/aws_smile_logo.png" width="40" height="24" />
            
          </a>
        </div>

        <!-- Button to toggle drawer -->
        <div class="md-flex__cell md-flex__cell--shrink">
          <label class="md-icon md-icon--menu md-header-nav__button"
              for="__drawer"></label>
        </div>

        <!-- Header title -->
        <div class="md-flex__cell md-flex__cell--stretch">
          <div class="md-flex__ellipsis md-header-nav__title"
              data-md-component="title">
            
              
                <span class="md-header-nav__topic">
                  Infrastructure Identity in AWS
                </span>
                <span class="md-header-nav__topic">
                  Module 2: Session Manager
                </span>
              
            
          </div>
        </div>


        <!-- Button to open search dialogue -->
        <!--
        <div class="md-flex__cell md-flex__cell--shrink">
          
            
              <label class="md-icon md-icon--search md-header-nav__button"
                  for="__search"></label>

              
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
            
          
        </div>

         -->

         <div class="md-flex__cell md-flex__cell--shrink">
            <div class="md-flex__ellipsis md-header-nav__lang">
                <div>
                    <button onclick="window.location.href = 'https://awssecworkshops.com/';" class="md-lang-dropbtn fa fa-home"></button>
                </div>
            </div>
        </div>

        <!-- Repository containing source -->
        
          <div class="md-flex__cell md-flex__cell--shrink">
            <div class="md-header-nav__source">
              


  

<a href="https://github.com/aws-samples/aws-secure-access-infrastructure-identity-workshop/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    aws-samples/aws-secure-access-infrastructure-identity-workshop
  </div>
</a>
            </div>
          </div>
        
      </div>
    </nav>
  </header>
    
    <div class="md-container">
      
        
      
      
        

<nav class="md-tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href=".." title="Overview" class="md-tabs__link md-tabs__link--active">
        Overview
      </a>
    
  </li>

      
        
      
        
      
        
      
        
      
        
      
        
      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <!--
  Copyright (c) 2016-2019 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Main navigation -->
<nav class="md-nav md-nav--primary" data-md-level="0">

  <!-- Site title -->
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://idm-infrastructure.awssecworkshops.com/"
        title="Infrastructure Identity in AWS" class="md-nav__button md-logo">
      
        <img src="../assets/images/aws_smile_logo.png" width="48" height="48" />
      
    </a>
    Infrastructure Identity
  </label>

  <!-- Repository containing source -->
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/aws-samples/aws-secure-access-infrastructure-identity-workshop/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    aws-samples/aws-secure-access-infrastructure-identity-workshop
  </div>
</a>
    </div>
  

  <!-- Render item list -->
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../01-environment-setup/" title="Module 1: Environment Build" class="md-nav__link">
      Module 1: Environment Build
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Module 2: Session Manager
      </label>
    
    <a href="./" title="Module 2: Session Manager" class="md-nav__link md-nav__link--active">
      Module 2: Session Manager
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#agenda" title="Agenda" class="md-nav__link">
    Agenda
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-iam-roles-and-permissions-to-enable-session-manager-for-amazon-ec2-instances" title="Create IAM roles and permissions to enable Session Manager for Amazon EC2 Instances" class="md-nav__link">
    Create IAM roles and permissions to enable Session Manager for Amazon EC2 Instances
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-iam-roles-and-permissions-to-enable-session-manager-for-hybrid-systems" title="Create IAM roles and permissions to enable Session Manager for hybrid systems" class="md-nav__link">
    Create IAM roles and permissions to enable Session Manager for hybrid systems
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-systems-manager-to-enable-hybrid-management" title="Configure Systems Manager to enable hybrid management" class="md-nav__link">
    Configure Systems Manager to enable hybrid management
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-instances-and-install-the-ssm-agent" title="Create instances and install the SSM Agent" class="md-nav__link">
    Create instances and install the SSM Agent
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-systems-manager-and-enable-hybrid-management" title="Configure Systems Manager and enable Hybrid management" class="md-nav__link">
    Configure Systems Manager and enable Hybrid management
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-iam-users-and-policy-restrictions-based-on-tags" title="Create IAM users and policy restrictions based on tags" class="md-nav__link">
    Create IAM users and policy restrictions based on tags
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-logging" title="Configure Logging" class="md-nav__link">
    Configure Logging
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#confirm-access" title="Confirm Access" class="md-nav__link">
    Confirm Access
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" title="Troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../03-using-EC2-Instance-Connect/" title="Module 3: EC2 Instance Connect" class="md-nav__link">
      Module 3: EC2 Instance Connect
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../04-cleanup/" title="Module 4: Cleanup" class="md-nav__link">
      Module 4: Cleanup
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../contribute/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#agenda" title="Agenda" class="md-nav__link">
    Agenda
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-iam-roles-and-permissions-to-enable-session-manager-for-amazon-ec2-instances" title="Create IAM roles and permissions to enable Session Manager for Amazon EC2 Instances" class="md-nav__link">
    Create IAM roles and permissions to enable Session Manager for Amazon EC2 Instances
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-iam-roles-and-permissions-to-enable-session-manager-for-hybrid-systems" title="Create IAM roles and permissions to enable Session Manager for hybrid systems" class="md-nav__link">
    Create IAM roles and permissions to enable Session Manager for hybrid systems
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-systems-manager-to-enable-hybrid-management" title="Configure Systems Manager to enable hybrid management" class="md-nav__link">
    Configure Systems Manager to enable hybrid management
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-instances-and-install-the-ssm-agent" title="Create instances and install the SSM Agent" class="md-nav__link">
    Create instances and install the SSM Agent
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-systems-manager-and-enable-hybrid-management" title="Configure Systems Manager and enable Hybrid management" class="md-nav__link">
    Configure Systems Manager and enable Hybrid management
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-iam-users-and-policy-restrictions-based-on-tags" title="Create IAM users and policy restrictions based on tags" class="md-nav__link">
    Create IAM users and policy restrictions based on tags
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-logging" title="Configure Logging" class="md-nav__link">
    Configure Logging
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#confirm-access" title="Confirm Access" class="md-nav__link">
    Confirm Access
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" title="Troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/aws-samples/aws-secure-access-infrastructure-identity-workshop/edit/master/docs/02-using-AWS-Systems-Manager-Session-Manager.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="module-2-session-manager">Module 2: Session Manager</h1>
<p>In this module we'll focus on the configuration of setting up secure administrative access to both on-premise systems and EC2 instances. The most secure environment is one in which no access is provided and all configuration has been done as part of a standard build process. However in the development environment you may still need access to your systems for iterating on configuration and troubleshooting. Using Amazon Systems Manager Session Manager and AWS IAM with tag based permissions we will implement this exact scenario and review the audit logs.</p>
<p>Using our Cloud9IDE and VPC, created by the CloudFormation Stack, we will create IAM roles with permissions to enable Session Manager access. Additionally, we are going to deploy 4 EC2 Instances, 4 will be standard AWS EC2 Instances (one tagged as development and the other production), and 2 instances will be used as mock on-premise systems. We will setup Systems Manager to manage the on-premise systems as well as the EC2 instances. Additionally, we will setup logging and review our activities after we've validated appropriate access.</p>
<h2 id="agenda">Agenda</h2>
<ol>
<li>Create IAM roles and permissions to enable Session Manager</li>
<li>Create instances and install the SSM Agent</li>
<li>Configure Systems Manager and enable Hybrid management</li>
<li>Create IAM users and policy restrictions based on tags</li>
<li>Configure logging</li>
<li>Confirm appropriate access and review logs</li>
</ol>
<h2 id="create-iam-roles-and-permissions-to-enable-session-manager-for-amazon-ec2-instances">Create IAM roles and permissions to enable Session Manager for Amazon EC2 Instances</h2>
<p>1.Go to <strong>Outputs</strong> section from your CloudFormation deployment, and click on the <strong>Cloud9IDE</strong>. Setup your AWS config file and ensure your Cloud9 environment is using your Access Keys, for additional details follow <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html" target="_blank">Quickly Configuring the AWS CLI</a> You may need to disable AWS managed temporary credentials in Cloud9 Preference, AWS Settings, Credentials.</p>
<p>2.In Cloud9, create an instance profile:</p>
<div class="codehilite"><pre><span></span>aws iam create-instance-profile --instance-profile-name SSMLabProfile
</pre></div>


<p>3.Create the json trust policy doc to attach to the IAM role. Create a new file with the following contents, save the file name: <strong>lab-role-trust-policy.json</strong>:</p>
<div class="codehilite"><pre><span></span>    <span class="p">{</span>
      <span class="nt">&quot;Version&quot;</span><span class="p">:</span> <span class="s2">&quot;2012-10-17&quot;</span><span class="p">,</span>
      <span class="nt">&quot;Statement&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;Effect&quot;</span><span class="p">:</span> <span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
        <span class="nt">&quot;Principal&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;Service&quot;</span><span class="p">:</span> <span class="s2">&quot;ec2.amazonaws.com&quot;</span><span class="p">},</span>
        <span class="nt">&quot;Action&quot;</span><span class="p">:</span> <span class="s2">&quot;sts:AssumeRole&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
</pre></div>


<p>4.Create an IAM role using the trust policy above:</p>
<div class="codehilite"><pre><span></span>aws iam create-role --role-name SSMLabRole --assume-role-policy-document file://lab-role-trust-policy.json
</pre></div>


<p>5.Add the role to the instance profile:</p>
<div class="codehilite"><pre><span></span>aws iam add-role-to-instance-profile --role-name SSMLabRole --instance-profile-name SSMLabProfile
</pre></div>


<p>6.Attach the existing <strong>EC2RoleSSMAccess</strong> to the newly created instance-profile:</p>
<div class="codehilite"><pre><span></span>aws iam attach-role-policy --policy-arn arn:aws:iam::aws:policy/service-role/AmazonEC2RoleforSSM --role-name SSMLabRole
</pre></div>


<h2 id="create-iam-roles-and-permissions-to-enable-session-manager-for-hybrid-systems">Create IAM roles and permissions to enable Session Manager for hybrid systems</h2>
<p>1.Create a text file with a name such as ssmservice-trust-policy.json with the following trust policy. Make sure to save the file with the .json file extension.</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;Version&quot;</span><span class="p">:</span> <span class="s2">&quot;2012-10-17&quot;</span><span class="p">,</span>
  <span class="nt">&quot;Statement&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;Effect&quot;</span><span class="p">:</span> <span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
    <span class="nt">&quot;Principal&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;Service&quot;</span><span class="p">:</span> <span class="s2">&quot;ssm.amazonaws.com&quot;</span><span class="p">},</span>
    <span class="nt">&quot;Action&quot;</span><span class="p">:</span> <span class="s2">&quot;sts:AssumeRole&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>2.Create a new role named <strong>SSMServiceRole</strong>:</p>
<div class="codehilite"><pre><span></span>aws iam create-role --role-name SSMServiceRole --assume-role-policy-document file://ssmservice-trust-policy.json
</pre></div>


<p>3.Attach-role-policy enables the SSMServiceRole to create a session token. The session token gives your managed instance permissions to run commands using System Manager.</p>
<div class="codehilite"><pre><span></span>aws iam attach-role-policy --role-name SSMServiceRole --policy-arn arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore
</pre></div>


<p>4.Let's make sure we allow our on-premise systems to write to CloudWatchLogs so that we can use the same Audit and Logging tools to review administrative access. We'll use the same Attach-role-policy to attach a policy that enables the SSMServiceRole to write to CloudWatchLogs.</p>
<div class="codehilite"><pre><span></span>aws iam attach-role-policy --role-name SSMServiceRole --policy-arn arn:aws:iam::aws:policy/CloudWatchAgentServerPolicy
</pre></div>


<h2 id="configure-systems-manager-to-enable-hybrid-management">Configure Systems Manager to enable hybrid management</h2>
<p>The activation process provides an Activation Code and ID which functions like an access key and secret key to provide secure access to the Systems Manager service form your managed instances.</p>
<p>1.Open the command line, Create a managed-instance activation for your Dev instance</p>
<blockquote>
<p>Please specify the us-east-1 region</p>
</blockquote>
<div class="codehilite"><pre><span></span>aws ssm create-activation --default-instance-name DevOnPrem --iam-role SSMServiceRole --registration-limit <span class="m">10</span> --region us-east-1
</pre></div>


<p>2.Create a managed-instance activation for your Prod instance</p>
<blockquote>
<p>Please specify the us-east-1 region</p>
</blockquote>
<div class="codehilite"><pre><span></span>aws ssm create-activation --default-instance-name ProdOnPrem --iam-role SSMServiceRole --registration-limit <span class="m">10</span> --region us-east-1
</pre></div>


<p><strong>Store the managed-instance Activation Code and Activation ID in a safe place.</strong> You specify this Code and ID when you install SSM Agent on systems on-premise. The code and ID combination functions like an Amazon EC2 access key ID and secret key to provide secure access to the Systems Manager service from your managed instances.</p>
<blockquote>
<p>If you lose the Code and ID, you must create a new activation. An activation expiration is a window of time when you can register on-premises machines with Systems Manager, default is 24 hours. An expired activation has no impact on your servers or virtual machines (VMs) that you registered with Systems Manager. This means that if an activation expires then you can’t register more servers or VMs with Systems Manager by using that specific activation. You simply need to create a new one. All of the servers and VMs that you registered will continue to be registered Systems Manager managed instances until you remove or disable SSM Agent on the server or VM and thereby unregister it. <a href="https://docs.aws.amazon.com/cli/latest/reference/ssm/create-activation.html" target="_blank">For more details:</a></p>
</blockquote>
<h2 id="create-instances-and-install-the-ssm-agent">Create instances and install the SSM Agent</h2>
<p>1.Go back to the CloudFormation Stack, find the stack that starts with "aws-cloud9-*" click on <strong>Resources</strong> and take note of the Security Group ID (sg-abc123). Now find the stack named "InfrastructureIdentity-Env-Setup" click on <strong>Resources</strong> and find the PublicSubnet1 and take note of that as you will use it in steps 2-5.</p>
<p>2.Now we will build the production instance using the Security Group ID and PublicSubnet1 created for us earlier, using the following cli command:</p>
<div class="codehilite"><pre><span></span>aws ec2 run-instances --iam-instance-profile <span class="nv">Name</span><span class="o">=</span>SSMLabProfile --image-id ami-0080e4c5bc078760e --instance-type t1.micro --subnet-id <span class="s2">&quot;subnet-xx&quot;</span> --security-group-ids <span class="s2">&quot;sg-xx&quot;</span> --associate-public-ip-address --tag-specifications <span class="s1">&#39;ResourceType=instance,Tags=[{Key=&quot;Name&quot;,Value=&quot;ProdEC2Instance&quot;},{Key=&quot;Environment&quot;,Value=&quot;Prod&quot;}]&#39;</span>
</pre></div>


<p>3.Build the development instance using the following cli command:
Note: If you pick a different region, please correct the ami-id (see table below).  </p>
<div class="codehilite"><pre><span></span>aws ec2 run-instances --iam-instance-profile <span class="nv">Name</span><span class="o">=</span>SSMLabProfile --image-id ami-0080e4c5bc078760e --instance-type t1.micro --subnet-id <span class="s2">&quot;subnet-xx&quot;</span> --security-group-ids <span class="s2">&quot;sg-xx&quot;</span> --associate-public-ip-address --tag-specifications <span class="s1">&#39;ResourceType=instance,Tags=[{Key=&quot;Name&quot;,Value=&quot;DevEC2Instance&quot;},{Key=&quot;Environment&quot;,Value=&quot;Dev&quot;}]&#39;</span>
</pre></div>


<p>4.Build a MOCK production on-premises instance using the following cli command:</p>
<blockquote>
<p><strong>IMPORTANT:</strong> We are not assigning an Instance Profile as these instances will mock our hybrid servers. <strong>Please use your own key-pair</strong>.</p>
</blockquote>
<div class="codehilite"><pre><span></span>aws ec2 run-instances --image-id ami-0080e4c5bc078760e --instance-type t1.micro --subnet-id <span class="s2">&quot;subnet-xx&quot;</span> --security-group-ids <span class="s2">&quot;sg-xx&quot;</span> --associate-public-ip-address --key-name <span class="s2">&quot;keyname-xx&quot;</span> --tag-specifications <span class="s1">&#39;ResourceType=instance,Tags=[{Key=&quot;Name&quot;,Value=&quot;ProdOnPrem&quot;},{Key=&quot;Environment&quot;,Value=&quot;Prod&quot;}]&#39;</span>
</pre></div>


<p>5.Build the MOCK on-premises development instance using the following cli command:</p>
<blockquote>
<p><strong>IMPORTANT:</strong> We are not assigning an Instance Profile as these instances will mock our hybrid servers. <strong>Please use your own key-pair</strong>.</p>
</blockquote>
<div class="codehilite"><pre><span></span>aws ec2 run-instances --image-id ami-0080e4c5bc078760e --instance-type t1.micro --subnet-id <span class="s2">&quot;subnet-xx&quot;</span> --security-group-ids <span class="s2">&quot;sg-xx&quot;</span> --associate-public-ip-address --key-name <span class="s2">&quot;keyname-xx&quot;</span> --tag-specifications <span class="s1">&#39;ResourceType=instance,Tags=[{Key=&quot;Name&quot;,Value=&quot;DevOnPrem&quot;},{Key=&quot;Environment&quot;,Value=&quot;Dev&quot;}]&#39;</span>
</pre></div>


<p>6.Update the Cloud9 security group to allow inbound SSH from <strong>172.20.0.0/16</strong>.</p>
<p>7.From your Cloud9 instance login to <strong>DevOnPrem</strong> and Run the following commands to install SSM with the correct Activation code and ID.</p>
<div class="codehilite"><pre><span></span>mkdir /tmp/ssm
curl https://s3.amazonaws.com/ec2-downloads-windows/SSMAgent/latest/linux_amd64/amazon-ssm-agent.rpm -o /tmp/ssm/amazon-ssm-agent.rpm
sudo yum install -y /tmp/ssm/amazon-ssm-agent.rpm
sudo stop amazon-ssm-agent
sudo amazon-ssm-agent -register -code <span class="s2">&quot;activation-code&quot;</span> -id <span class="s2">&quot;activation-id&quot;</span> -region <span class="s2">&quot;region&quot;</span>
sudo start amazon-ssm-agent
</pre></div>


<p>8.From your Cloud9 instance login to <strong>ProdOnPrem</strong> and Run the following commands to install SSM with the correct Activation code and ID.</p>
<div class="codehilite"><pre><span></span>mkdir /tmp/ssm
curl https://s3.amazonaws.com/ec2-downloads-windows/SSMAgent/latest/linux_amd64/amazon-ssm-agent.rpm -o /tmp/ssm/amazon-ssm-agent.rpm
sudo yum install -y /tmp/ssm/amazon-ssm-agent.rpm
sudo stop amazon-ssm-agent
sudo amazon-ssm-agent -register -code <span class="s2">&quot;activation-code&quot;</span> -id <span class="s2">&quot;activation-id&quot;</span> -region <span class="s2">&quot;region&quot;</span>
sudo start amazon-ssm-agent
</pre></div>


<p><strong>DON’T Forget to start the ssm agent after activation - sudo start amazon-ssm-agent</strong></p>
<p>9.Log out of DevOnPrem and ProdOnPrem systems.</p>
<h2 id="configure-systems-manager-and-enable-hybrid-management">Configure Systems Manager and enable Hybrid management</h2>
<p>In order to use Session Manager to connect to hybrid systems SSM needs to be configured for advanced-instances tier. To enable the advanced-instances tier:</p>
<p>1.Open the <strong>AWS Systems Manager</strong> console</p>
<p>2.In the navigation pane, choose <strong>Managed instances</strong>.</p>
<p>3.Choose the <strong>Settings</strong> tab.</p>
<p>4.Choose <strong>Change account setting</strong>.</p>
<p>5.Review the information in the pop-up about changing account settings, and then, if you approve, choose the option to accept and click <strong>Change setting</strong>. <strong>NOTE:</strong> The system can take several minutes to complete the process of moving all instances from the standard-instances tier to the advanced-instances tier.</p>
<p>6.Select <strong>Managed Instances</strong> You should now see a new <strong>Advanced Instances</strong> label next to the Managed Instances Heading and you can now manage hybrid systems.</p>
<h3 id="create-iam-users-and-policy-restrictions-based-on-tags">Create IAM users and policy restrictions based on tags</h3>
<p><strong>NOTE:</strong> The following steps require full access to IAM.</p>
<p>1.From your Cloud9 session, use the create-user command to create the user.</p>
<div class="codehilite"><pre><span></span>aws iam create-user --user-name MyWorkshopUser
</pre></div>


<p>2.Assign a password to the user</p>
<div class="codehilite"><pre><span></span>aws iam create-login-profile --user-name MyWorkshopUser --password <span class="s1">&#39;My!User1Login8P@ssword&#39;</span>
</pre></div>


<p>3.Now we will create and attach an IAM Custom Policy to MyWorkshopUser. Create a Custom IAM Policy named SSMDevAccess, <strong>Copy</strong> the json code below and paste it into a new file called <strong>SSMDevAccess.json</strong></p>
<blockquote>
<p>This file must reside in the same directory where your CLI session is running, or you must specify the location.</p>
</blockquote>
<div class="codehilite"><pre><span></span><span class="o">{</span>
    <span class="s2">&quot;Version&quot;</span>: <span class="s2">&quot;2012-10-17&quot;</span>,
    <span class="s2">&quot;Statement&quot;</span>: <span class="o">[</span>
        <span class="o">{</span>
            <span class="s2">&quot;Effect&quot;</span>: <span class="s2">&quot;Allow&quot;</span>,
            <span class="s2">&quot;Action&quot;</span>: <span class="o">[</span>
                <span class="s2">&quot;ssm:DescribeSessions&quot;</span>,
                <span class="s2">&quot;ssm:GetConnectionStatus&quot;</span>,
                <span class="s2">&quot;ssm:DescribeInstanceProperties&quot;</span>,
                <span class="s2">&quot;ec2:DescribeInstances&quot;</span>,
                <span class="s2">&quot;ssm:StartSession&quot;</span>
            <span class="o">]</span>,
            <span class="s2">&quot;Resource&quot;</span>: <span class="s2">&quot;*&quot;</span>
        <span class="o">}</span>,
        <span class="o">{</span>
            <span class="s2">&quot;Sid&quot;</span>: <span class="s2">&quot;ReadAlltheSSMThings&quot;</span>,
            <span class="s2">&quot;Effect&quot;</span>: <span class="s2">&quot;Allow&quot;</span>,
            <span class="s2">&quot;Action&quot;</span>: <span class="o">[</span>
                <span class="s2">&quot;ssm:Get*&quot;</span>,
                <span class="s2">&quot;ssm:Describe*&quot;</span>,
                <span class="s2">&quot;ssm:List*&quot;</span>
            <span class="o">]</span>,
            <span class="s2">&quot;Resource&quot;</span>: <span class="s2">&quot;*&quot;</span>
        <span class="o">}</span>,
        <span class="o">{</span>
            <span class="s2">&quot;Sid&quot;</span>: <span class="s2">&quot;SameUserTerminate&quot;</span>,
            <span class="s2">&quot;Effect&quot;</span>: <span class="s2">&quot;Allow&quot;</span>,
            <span class="s2">&quot;Action&quot;</span>: <span class="s2">&quot;ssm:TerminateSession&quot;</span>,
            <span class="s2">&quot;Resource&quot;</span>: <span class="s2">&quot;arn:aws:ssm:*:*:session/</span><span class="si">${</span><span class="nv">aws</span><span class="p">:</span><span class="nv">username</span><span class="si">}</span><span class="s2">-*&quot;</span>
        <span class="o">}</span>,
        <span class="o">{</span>
            <span class="s2">&quot;Sid&quot;</span>: <span class="s2">&quot;DenySMtoProd&quot;</span>,
            <span class="s2">&quot;Effect&quot;</span>: <span class="s2">&quot;Deny&quot;</span>,
            <span class="s2">&quot;Action&quot;</span>: <span class="s2">&quot;ssm:StartSession&quot;</span>,
            <span class="s2">&quot;Resource&quot;</span>: <span class="o">[</span>
                <span class="s2">&quot;arn:aws:ec2:*:*:instance/*&quot;</span>
            <span class="o">]</span>,
            <span class="s2">&quot;Condition&quot;</span>: <span class="o">{</span>
                <span class="s2">&quot;StringLike&quot;</span>: <span class="o">{</span>
                    <span class="s2">&quot;ssm:resourceTag/Environment&quot;</span>: <span class="s2">&quot;Prod&quot;</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">]</span>
<span class="o">}</span>
</pre></div>


<p>4.Create the IAM policy using the file you just created</p>
<div class="codehilite"><pre><span></span>aws iam create-policy --policy-name SSMDevAccess --policy-document file://SSMDevAccess.json
</pre></div>


<p>The result should return the following:</p>
<div class="codehilite"><pre><span></span> {
    &quot;Policy&quot;: {
        &quot;PolicyName&quot;: &quot;SSMDevAccess&quot;,
        &quot;PolicyId&quot;: &quot;ANPAJIFY55FF57L6ZEHKO&quot;,
        &quot;Arn&quot;: &quot;arn:aws:iam::123456789012:policy/SSMDevAccess&quot;,
        &quot;Path&quot;: &quot;/&quot;,
        &quot;DefaultVersionId&quot;: &quot;v1&quot;,
        &quot;AttachmentCount&quot;: 0,
        &quot;PermissionsBoundaryUsageCount&quot;: 0,
        &quot;IsAttachable&quot;: true,
        &quot;CreateDate&quot;: &quot;2019-03-21T20:51:21Z&quot;,
        &quot;UpdateDate&quot;: &quot;2019-03-21T20:51:21Z&quot;
    }
}
</pre></div>


<p>5.Copy the Arn value as you will need it for the next instruction. Copy the portion to the right of the "Arn": <code>arn:aws:iam::123456789012:policy/SSMDevAccess</code>.</p>
<p>6.To attach the policy, use the attach-user-policy command, and reference the environment variable that holds the policy ARN.</p>
<div class="codehilite"><pre><span></span>aws iam attach-user-policy --user-name MyWorkshopUser --policy-arn arn:aws:iam::123456789012:policy/SSMDevAccess
</pre></div>


<p>7.Let's attach a policy that allows our workshop user to view the logs in CloudWatch.</p>
<div class="codehilite"><pre><span></span>aws iam attach-user-policy --user-name MyWorkshopUser --policy-arn  arn:aws:iam::aws:policy/CloudWatchLogsReadOnlyAccess
</pre></div>


<p>8.Let's attach a policy that allows our workshop user to view the events in CloudTrail.</p>
<div class="codehilite"><pre><span></span>aws iam attach-user-policy --user-name MyWorkshopUser --policy-arn arn:aws:iam::aws:policy/CloudWatchEventsReadOnlyAccess
</pre></div>


<p>9.Verify that the policy is attached to the user by running the list-attached-user-policies command.</p>
<div class="codehilite"><pre><span></span>aws iam list-attached-user-policies --user-name MyWorkshopUser
</pre></div>


<p>The result should return the following:</p>
<div class="codehilite"><pre><span></span>{
    &quot;AttachedPolicies&quot;: [
        {
            &quot;PolicyName&quot;: &quot;SSMDevAccess&quot;,
            &quot;PolicyArn&quot;: &quot;arn:aws:iam::aws:policy/SSMDevAccess&quot;
        }
    ]
}
</pre></div>


<h2 id="configure-logging">Configure Logging</h2>
<p>Session Manager provides you with options for auditing and logging session activity in your AWS account. This allows you to do the following:</p>
<blockquote>
<ul>
<li>Create and store session logs for archival purposes.</li>
<li>Generate a report showing details of every connection made to your instances using Session Manager over the past 30 days.</li>
<li>Generate notifications of session activity in your AWS account, such as Amazon Simple Notification Service (Amazon SNS) notifications.</li>
<li>Automatically initiate another action on an AWS resource as the result of session activity, such as running an AWS Lambda function, starting an AWS CodePipeline pipeline, or running an AWS Systems Manager Run Command document.</li>
</ul>
</blockquote>
<p>We will log session data using Amazon CloudWatch Logs, archive session logs to Amazon S3 and generate access reports.</p>
<ol>
<li>
<p>To setup Session Manager logging in Amazon CloudWatch Logs, open the <a href="https://console.aws.amazon.com/cloudwatch/" target="_blank">CloudWatch Console</a>. In the navigation pane, choose <strong>Logs</strong></p>
</li>
<li>
<p>Choose Actions, Create log group.</p>
</li>
<li>
<p>Type in the following name for the log group "SSM-Logs"</p>
</li>
<li>
<p>Now open the <a href="https://console.aws.amazon.com/systems-manager/" target="_blank">AWS Systems Manager console</a>. In the navigation pane, choose <strong>Session Manager</strong></p>
</li>
<li>
<p>Select <strong>Configure Preferences</strong> You have several additional configurations options that we will not use for this lab but should consider for future use:</p>
<blockquote>
<ul>
<li>Log all of your session session output to Amazon S3 and Encrypt the log data.</li>
<li>Encrypt your active session data between your users' local machine and the managed instance using KMS.</li>
<li>Enable RunAs support for Linux instances instead of the ssm-user account.</li>
</ul>
</blockquote>
</li>
<li>
<p>Select the check box next to <strong>CloudWatch logs</strong>.</p>
</li>
<li>
<p>For CloudWatch logs, select <strong>Choose a log group name from the list</strong> specify the CloudWatch Logs group you just created <strong>SSM-Logs</strong> and select <strong>Save</strong>. Additionally, you can view ssm-agent logs on the instance here:</p>
<blockquote>
<ul>
<li>/var/log/amazon/ssm/amazon-ssm-agent.log</li>
<li>/var/log/amazon/ssm/errors.log</li>
</ul>
</blockquote>
</li>
</ol>
<h2 id="confirm-access">Confirm Access</h2>
<p>1.Sign out of your current session or login into to your AWS account using a different browser as <strong>MyWorkshopUser</strong>. Go to the <a href="https://console.aws.amazon.com/systems-manager/" target="_blank">AWS Systems Manager console</a>. In the navigation pane, choose <strong>Session Manager</strong></p>
<p>2.Click <strong>Start session</strong>, select the <strong>ProdOnPrem</strong> name, click on <strong>start Session</strong> and a new session windows should open for you. This demonstrates that you can manage on-premise systems with Session Manager.</p>
<p>3.In the Session Manager session type the following:</p>
<div class="codehilite"><pre><span></span>whoami
</pre></div>


<p>The result should return the following:
ssm-user</p>
<p>3.Click Terminate to end.</p>
<p>4.Repeat the steps above with the DevSSM instance. You should find the same results, the result should return the following:
ssm-user</p>
<p>5.Click <strong>Terminate</strong> to end.</p>
<p>6.Now try the ProdSSM instance, click start Session. The result should return the following:
<img alt="Session Manager Access Denied" src="../images/Denied.png" /></p>
<p>7.Click <strong>Terminate</strong> to end your session, at this point, all sessions should be terminated.</p>
<p>8.Go to the <strong>AWS Systems Manager</strong>, click on <strong>Session Manager</strong>, click on <strong>Session History</strong>. Your sessions should show up as Terminated or Terminating. Once the session has terminated you will see a link to <strong>CloudWatch Logs</strong>.
<img alt="Session Manager Logs in CloudWatch Logs" src="../images/SSM-Cloudwatch.png" /></p>
<p>Click on it to view the audit logs of your session. CloudWatch Logs will show details of the session such as commands that were run on the host. These logs can also be stored in S3 for you.
<img alt="Session Manager Logs in CloudWatch Logs" src="../images/CloudwatchLogs.png" /></p>
<p>9.If you have CloudTrail enabled, you can view the Session Manager events in CloudTrail as well. Go to <strong>CloudTrail</strong> and find the Event name <strong>StartSession</strong> to view the details of your Session Manager session that CloudTrail captures. You Should see something like this:
<img alt="Session Manager Logs in CloudTrail" src="../images/CloudTraillog-edited.png" /></p>
<h2 id="troubleshooting">Troubleshooting</h2>
<p>•   If your on-premises instances are showing offline, make sure the ssm-agent was re-started after the SSM activation process.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../01-environment-setup/" title="Module 1: Environment Build" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Module 1: Environment Build
              </span>
            </div>
          </a>
        
        
          <a href="../03-using-EC2-Instance-Connect/" title="Module 3: EC2 Instance Connect" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Module 3: EC2 Instance Connect
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            &copy; 2019, Amazon Web Services, Inc. or its affiliates. All rights reserved.
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://awssecworkshops.com" class="md-footer-social__link fa fa-home"></a>
    
      <a href="https://aws.amazon.com/security/" class="md-footer-social__link fa fa-shield"></a>
    
      <a href="https://twitter.com/awssecurityinfo?lang=en" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://aws.amazon.com/blogs/security/" class="md-footer-social__link fa fa-rss"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.39abc4af.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>